<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BARSTAGEplot</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>

    <header id="top-bar">
        <h1>BARSTAGEplot</h1>
        <div class="file-actions">
            <button class="btn"><i class="fas fa-file"></i> Nuevo</button>
            <button class="btn"><i class="fas fa-save"></i> Guardar</button>
            <button class="btn"><i class="fas fa-folder-open"></i> Cargar</button>
            <div class="export-menu">
                <button class="btn"><i class="fas fa-share-square"></i> Exportar</button>
            </div>
            <button class="btn" id="preferences-btn"><i class="fas fa-cog"></i> Preferencias</button>
        </div>
        
        <div id="project-info-display">
            </div>
        <button id="theme-toggle" class="btn theme-day" title="Cambiar Tema">
            <i class="fas fa-moon"></i> Día/Noche
        </button>
    </header>

    <div id="main-container">
        <section id="project-init-screen" class="app-screen active">
            <h2><i class="fas fa-cogs"></i> Diseño Inicial del Proyecto</h2>
            <form id="project-form">
                <label for="project-name">Nombre del proyecto:</label>
                <input type="text" id="project-name" required>

                <label for="tour-name">Nombre de la gira:</label>
                <input type="text" id="tour-name">

                <label for="date">Fecha:</label>
                <input type="date" id="date">

                <label for="stage-size">Tamaño de escenario (Ancho x Alto):</label>
                <input type="text" id="stage-size" placeholder="Ej: 8m x 6m" required>

                <label for="input-channels">Canales de entrada:</label>
                <input type="number" id="input-channels" min="0" value="16" required>

                <label for="sends-count">Cantidad de envíos:</label>
                <input type="number" id="sends-count" min="0" value="8" required>

                <button type="submit" class="btn primary-btn"><i class="fas fa-project-diagram"></i> Crear Proyecto</button>
            </form>
        </section>

        <nav id="main-nav">
            <button class="tab-button" data-tab="stage-plot"><i class="fas fa-drafting-compass"></i> PLANO</button>
            <button class="tab-button" data-tab="input-list"><i class="fas fa-list-alt"></i> LISTA DE CANALES</button>
            <button class="tab-button" data-tab="sends-list"><i class="fas fa-volume-up"></i> ENVÍOS</button>
            <button class="tab-button" data-tab="foh-config"><i class="fas fa-sliders-h"></i> FOH</button>
            <button class="tab-button" data-tab="rider-doc"><i class="fas fa-scroll"></i> RIDER</button>
        </nav>

        <div id="tab-content">

            <section id="stage-plot" class="tab-screen">
                
                <aside id="element-palette">
                    <h3>Elementos <i class="fas fa-box-open"></i></h3>
                    
                    <div id="palette-tabs">
                        <button class="palette-tab-button active" data-category="general" title="General"><i class="fas fa-cubes"></i></button>
                        <button class="palette-tab-button" data-category="mics" title="Micrófonos"><i class="fas fa-microphone"></i></button>
                        <button class="palette-tab-button" data-category="instruments" title="Instrumentos"><i class="fas fa-guitar"></i></button>
                        <button class="palette-tab-button" data-category="shapes" title="Formas"><i class="fas fa-square-full"></i></button>
                    </div>

                    <div id="palette-content">
                        
                        <div id="category-general" class="palette-category active">
                            <div class="stage-icon" draggable="true" data-type="speaker"><i class="fas fa-volume-up"></i> Caja</div>
                            <div class="stage-icon" draggable="true" data-type="monitor"><i class="fas fa-headset"></i> Monitor</div>
                            <div class="stage-icon" draggable="true" data-type="amp"><i class="fas fa-cube"></i> Amplificador</div>
                            <div class="stage-icon" draggable="true" data-type="keyboard"><i class="fas fa-keyboard"></i> Teclado</div>
                            <div class="stage-icon" draggable="true" data-type="drums"><i class="fas fa-drum"></i> Batería</div>
                            <div class="stage-icon" draggable="true" data-type="percussion"><i class="fas fa-bong"></i> Percusión</div>
                            <div class="stage-icon" draggable="true" data-type="riser"><i class="fas fa-layer-group"></i> Riser</div>
                            <div class="stage-icon" draggable="true" data-type="text"><i class="fas fa-font"></i> Texto</div>
                        </div>

                        <div id="category-mics" class="palette-category">
                            <div class="stage-icon" draggable="true" data-type="vocal-mic"><i class="fas fa-microphone"></i> Vocal</div>
                            <div class="stage-icon" draggable="true" data-type="instrument-mic"><i class="fas fa-microphone-alt"></i> Instr.</div>
                            <div class="stage-icon" draggable="true" data-type="di"><i class="fas fa-plug"></i> DI</div>
                        </div>

                        <div id="category-instruments" class="palette-category">
                            <div class="stage-icon" draggable="true" data-type="guitar"><i class="fas fa-guitar"></i> Guitarra</div>
                            <div class="stage-icon" draggable="true" data-type="bass"><i class="fas fa-bass-drum"></i> Bajo</div>
                            <div class="stage-icon" draggable="true" data-type="sax"><i class="fas fa-saxophone"></i> Saxo</div>
                        </div>
                        
                        <div id="category-shapes" class="palette-category">
                            <div class="stage-icon" draggable="true" data-type="rectangle"><i class="far fa-square"></i> Rectángulo</div>
                            <div class="stage-icon" draggable="true" data-type="circle"><i class="far fa-circle"></i> Círculo</div>
                            <div class="stage-icon" draggable="true" data-type="triangle"><i class="fas fa-caret-up"></i> Triángulo</div>
                        </div>

                    </div>

                </aside>

                <main id="canvas-area">
                    <div id="stage-canvas" class="a4-proportional">
                        <p class="canvas-placeholder">Arrastra y suelta elementos aquí. (Lienzo Proporcional A4)</p>
                    </div>
                </main>

                <aside id="element-config-panel">
                    <h3>Configuración <i class="fas fa-palette"></i></h3>
                    <p class="config-placeholder">Selecciona un elemento en el plano para configurar sus propiedades.</p>
                    <div id="element-controls" style="display: none;">
                        <h4><span id="selected-element-title"></span></h4>
                        
                        <label for="color-picker">Color:</label>
                        <input type="color" id="color-picker">

                        <label for="shape-selector">Forma:</label>
                        <select id="shape-selector">
                            <option value="square">Cuadrado/Rectángulo</option>
                            <option value="circle">Círculo</option>
                        </select>
                        
                        <label for="z-index-selector">Capa (Z-Index):</label>
                        <input type="number" id="z-index-selector" min="1" max="100" value="10">

                        <button id="delete-element-btn" class="btn primary-btn" style="background-color: #dc3545;">
                            <i class="fas fa-trash"></i> Eliminar
                        </button>
                    </div>
                </aside>
            </section>

            <section id="input-list" class="tab-screen">
                <h2><i class="fas fa-list-alt"></i> Lista de Canales (Patch List)</h2>
                <button id="add-input-channel-btn" class="btn primary-btn"><i class="fas fa-plus"></i> Añadir Canal</button>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th style="width: 5%;">Ch</th>
                            <th style="width: 20%;">Nombre de canal</th>
                            <th style="width: 20%;">Mic/DI</th>
                            <th style="width: 5%;">Phantom</th>
                            <th style="width: 10%;">Pie</th>
                            <th style="width: 20%;">Sub-Snake</th>
                            <th style="width: 15%;">Notas</th>
                            <th style="width: 5%;"><i class="fas fa-trash"></i></th>
                        </tr>
                    </thead>
                    <tbody id="input-list-body">
                        </tbody>
                </table>
            </section>

            <section id="sends-list" class="tab-screen">
                <h2><i class="fas fa-volume-up"></i> Envíos de Monitores (Monitor Sends)</h2>
                <button id="add-sends-btn" class="btn primary-btn"><i class="fas fa-plus"></i> Añadir Envío</button>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th style="width: 5%;">Nº</th>
                            <th style="width: 20%;">Nombre del Envío</th>
                            <th style="width: 15%;">Tipo</th>
                            <th style="width: 15%;">Input/Aux</th>
                            <th style="width: 5%;">Stereo</th>
                            <th style="width: 35%;">Notas</th>
                            <th style="width: 5%;"><i class="fas fa-trash"></i></th>
                        </tr>
                    </thead>
                    <tbody id="sends-list-body">
                        </tbody>
                </table>
            </section>

            <section id="foh-config" class="tab-screen">
                <h2><i class="fas fa-broadcast-tower"></i> Configuración FOH</h2>
                <button class="btn primary-btn"><i class="fas fa-plus"></i> Añadir Configuración</button>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nº</th>
                            <th>Destino</th>
                            <th>Tipo (Matriz/Bus)</th>
                            <th>Notas</th>
                            <th><i class="fas fa-trash"></i></th>
                        </tr>
                    </thead>
                    <tbody id="foh-config-body">
                        </tbody>
                </table>
            </section>

            <section id="rider-doc" class="tab-screen">
                <h2><i class="fas fa-file-invoice"></i> Rider Técnico</h2>
                <div id="rider-editor" contenteditable="true" class="text-editor">
                    <h3>Rider Técnico - [Nombre del Proyecto]</h3>
                    <p>Escribe aquí toda la documentación necesaria para el evento. Puedes usar negritas, viñetas, etc.</p>
                    <ul>
                        <li><p>Ejemplo de punto en viñeta.</p></li>
                    </ul>
                </div>
            </section>
        </div>
        
        <section id="preferences-screen" class="app-screen">
            <div id="preferences-content">
                <h2><i class="fas fa-cog"></i> Preferencias del Proyecto</h2>
                
                <div class="pref-section">
                    <h3>Datos Iniciales del Proyecto</h3>
                    
                    <form id="project-preferences-form">
                        <label for="pref-project-name">Nombre del proyecto:</label>
                        <input type="text" id="pref-project-name" required>

                        <label for="pref-tour-name">Nombre de la gira:</label>
                        <input type="text" id="pref-tour-name">

                        <label for="pref-date">Fecha:</label>
                        <input type="date" id="pref-date">

                        <label for="pref-stage-size">Tamaño de escenario (Ancho x Alto):</label>
                        <input type="text" id="pref-stage-size" placeholder="Ej: 8m x 6m" required>

                        <label for="pref-input-channels">Canales de entrada:</label>
                        <input type="number" id="pref-input-channels" min="0" required>

                        <label for="pref-sends-count">Cantidad de envíos:</label>
                        <input type="number" id="pref-sends-count" min="0" required>
                        
                        <button type="submit" class="btn primary-btn"><i class="fas fa-save"></i> Guardar Cambios</button>
                    </form>
                </div>
                
                <div class="pref-section">
                    <h3>Otros Ajustes</h3>
                    <p>Modo Día/Noche: Usa el botón en la barra superior para cambiar el tema visual.</p>
                </div>
                
                <button id="close-preferences-btn" class="btn"><i class="fas fa-times"></i> Cerrar</button>
            </div>
        </section>
        </div>

    <script src="script.js"></script>
</body>
</html>
